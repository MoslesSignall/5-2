; 第15题：将一组有符号数中的负数求和，并统计负数的个数，
; 并在屏幕上以十进制的形式显示结果：
; 38H，4AH，0C5H，83H，9CH，0B4H，7FH，0C4H，05H，0F5H
; Coded by: Mosles Signall
; Date: 2025-Oct-29

DATAS SEGMENT
    NUMBER DB 0
    RESULT DW 0
    MANY DB 0
DATAS ENDS

STACKS SEGMENT
    DW 100 DUP(?)
STACKS ENDS

CODES SEGMENT
    ASSUME CS:CODES,DS:DATAS,SS:STACKS
START:
    MOV AX,DATAS
    MOV DS,AX
    MOV BX,0
    MOV CX,16

INPUT:
    CMP BX,10
    JE HOW_MANY
    MOV AH,1
    INT 21H
    CMP AL,'H'
    JE ONE_NUMBER_END
    PUSH AX
    MOV AL,NUMBER
    MUL CL
    MOV NUMBER,AL
    POP AX
    SUB AL,30H
    CMP AL,09H
    JA SUB07
    SUB07_END:
    ADD NUMBER,AL
    JMP INPUT

ADDITION:
    CMP NUMBER,81H
    JB POSITIVE
    MOV AL,NUMBER
    SUB AL,80H
    MOV AH,0
    ADD RESULT,AX
    INC MANY
    JMP INPUT

HOW_MANY:
	MOV DL,MANY
	MOV DH,0
	MOV AH,2
	ADD DL,30H
	INT 21H
	MOV DL,0AH
	INT 21H
	
DISPLAY:
    MOV AH,2
    MOV DL,'-'
    INT 21H
    MOV BX,10
    MOV CX,0
    MOV AX,RESULT
    
DIVISION_LOOP:
    MOV DX,0
    DIV BX
    ADD DX,30H
    PUSH DX
    INC CX
    CMP AX,0
    JNE DIVISION_LOOP

SHOW:
    MOV AH,2
    POP DX
    INT 21H
    LOOP SHOW

EXIT:
    MOV AH,4CH
    INT 21H

SUB07:
    SUB AL,07H
    JMP SUB07_END

ONE_NUMBER_END:
    INC BX
    MOV AH,2
    MOV DX,0AH
    INT 21H
    MOV AX,0
    JMP ADDITION

POSITIVE:
    MOV NUMBER,0
    JMP INPUT
CODES ENDS
    END START